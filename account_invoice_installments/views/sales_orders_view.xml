<odoo>
    <!-- Add order_type to tree view -->
    <record id="view_order_list_custom" model="ir.ui.view">
        <field name="name">sale.order.list.custom</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='date_order']" position="after">
                <field name="order_type"/>
            </xpath>
        </field>
    </record>

    <!-- Add order_type to form view -->
    <record id="view_order_form_custom" model="ir.ui.view">
        <field name="name">sale.order.form.custom</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='client_order_ref']" position="after">
                <field name="order_type"/>
            </xpath>
        </field>
    </record>
    <record id="sale_order_form_installments" model="ir.ui.view">
        <field name="name">sale.order.form.installments</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
             <!-- Insert before payment_term_id wherever it appears (usually Other Info/Invoicing) -->
            <xpath expr="//sheet//field[@name='date_order']" position="before">
                <field name="order_type"/>
            </xpath>
            <xpath expr="//sheet//field[@name='payment_term_id']" position="before">
                <field name="payment_type"/>
            </xpath>
            <xpath expr="//sheet//field[@name='payment_term_id']" position="attributes">
                 <attribute name="invisible">payment_type in ['immediate', 'regular'] </attribute>
            </xpath>

        </field>
    </record>

    <record id="view_sales_order_filter_custom" model="ir.ui.view">
        <field name="name">sale.order.filter.custom</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_sales_order_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//search" position="inside">
                <!-- Default filters for each type -->
                <filter string="طلب البيع" name="standard_orders" domain="[('order_type','=','standard')]"/>
                <filter string="طلب بيع مستودع" name="custom_orders" domain="[('order_type','=','custom')]"/>
                <filter string="طلب بيع خارجي" name="wholesale_orders" domain="[('order_type','=','wholesale')]"/>
                <filter string="طلب بيع خدمة" name="subscription_orders" domain="[('order_type','=','subscription')]"/>

                <!-- Group by Order Type -->
                <filter string="Order Type" name="order_type" context="{'group_by': 'order_type'}"/>
            </xpath>

            <!-- Add order_type field to search view -->
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="order_type" filter_domain="[('order_type','ilike',self)]"/>
            </xpath>
        </field>
    </record>
    <!-- Add quick creation buttons to dashboard -->
    <!--    <record id="view_sale_order_kanban_custom" model="ir.ui.view">-->
    <!--        <field name="name">sale.order.kanban.custom</field>-->
    <!--        <field name="model">sale.order</field>-->
    <!--        <field name="inherit_id" ref="sale.view_order_kanban"/>-->
    <!--        <field name="arch" type="xml">-->
    <!--            <xpath expr="//div[hasclass('o_kanban_quick_create')]" position="inside">-->
    <!--                <div class="d-flex justify-content-around mt-2">-->
    <!--                    <button name="action_create_standard" type="object" string="Standard Order"-->
    <!--                            class="btn-primary" context="{'default_order_type': 'standard'}"/>-->
    <!--                    <button name="action_create_custom" type="object" string="Custom Order"-->
    <!--                            class="btn-secondary" context="{'default_order_type': 'custom'}"/>-->
    <!--                    <button name="action_create_wholesale" type="object" string="Wholesale Order"-->
    <!--                            class="btn-info" context="{'default_order_type': 'wholesale'}"/>-->
    <!--                </div>-->
    <!--            </xpath>-->
    <!--        </field>-->
    <!--    </record>-->
    <!-- Standard Sales Action -->
    <record id="action_standard_orders" model="ir.actions.act_window">
        <field name="name">طلب البيع</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">list,form,kanban,calendar,pivot,graph</field>
        <field name="context">{'search_default_standard_orders': 1, 'default_order_type': 'standard'}</field>
        <field name="domain">[('order_type', '=', 'standard')]</field>
<!--        <field name="search_view_id" ref="sale.view_sales_order_filter"/>-->
    </record>

    <!-- Custom Sales Action -->
    <record id="action_custom_orders" model="ir.actions.act_window">
        <field name="name">طلب بيع مستودع</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">list,form,kanban,calendar,pivot,graph</field>
        <field name="context">{'search_default_custom_orders': 1, 'default_order_type': 'custom'}</field>
        <field name="domain">[('order_type', '=', 'custom')]</field>
        <field name="search_view_id" ref="sale.view_sales_order_filter"/>
    </record>

    <!-- Wholesale Sales Action -->
    <record id="action_wholesale_orders" model="ir.actions.act_window">
        <field name="name">طلب بيع خارجي</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">list,form,kanban,calendar,pivot,graph</field>
        <field name="context">{'search_default_wholesale_orders': 1, 'default_order_type': 'wholesale'}</field>
        <field name="domain">[('order_type', '=', 'wholesale')]</field>
        <field name="search_view_id" ref="sale.view_sales_order_filter"/>
    </record>
        <!-- Subscription Sales Action -->
    <record id="action_subscription_orders" model="ir.actions.act_window">
        <field name="name">طلب بيع خدمة</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">list,form,kanban,calendar,pivot,graph</field>
        <field name="context">{'search_default_subscription_orders': 1, 'default_order_type': 'subscription'}</field>
        <field name="domain">[('order_type', '=', 'subscription')]</field>
        <field name="search_view_id" ref="sale.view_sales_order_filter"/>
    </record>


    <!-- views/sale_order_views.xml -->

</odoo>